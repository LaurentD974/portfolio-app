<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: contactForm.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: contactForm.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useRef, useState } from "react";
import emailjs from "@emailjs/browser";

/**
 * Composant `ContactForm` permettant d'envoyer un message via un formulaire de contact.
 */
function ContactForm() {
  /** @type {Object} State pour stocker les valeurs du formulaire */
  const [formData, setFormData] = useState({
    name: "",
    email: "",
    subject: "",
    message: "",
  });

  /** @type {string} Identifiant du modèle EmailJS */
  const TEMPLATE_ID = import.meta.env.VITE_TEMPLATE_ID;
  /** @type {string} Identifiant du service EmailJS */
  const SERVICE_ID = import.meta.env.VITE_SERVICE_ID;
  /** @type {string} Clé publique EmailJS */
  const PUBLIC_KEY = import.meta.env.VITE_PUBLIC_KEY;

  /** @type {string} Message de statut pour afficher la confirmation ou les erreurs */
  const [statusMessage, setStatusMessage] = useState("");
  /** @type {React.RefObject} Référence du formulaire */
  const form = useRef();

  /**
   * Met à jour l'état du formulaire lors de la saisie de l'utilisateur.
   * @param {React.ChangeEvent&lt;HTMLInputElement | HTMLTextAreaElement>} e - Événement de changement.
   */
  const handleChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  /**
   * Soumet le formulaire en envoyant les données à l'API et via EmailJS.
   * @param {React.FormEvent&lt;HTMLFormElement>} e - Événement de soumission du formulaire.
   */
  const handleSubmit = async (e) => {
    e.preventDefault();
    console.log(JSON.stringify({ data: formData }));

    try {
      // Envoi des données au backend Strapi
      const response = await fetch("http://localhost:1337/api/contacts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ data: formData }),
      });

      // Envoi du formulaire via EmailJS
      emailjs
        .sendForm(SERVICE_ID, TEMPLATE_ID, form.current, {
          publicKey: PUBLIC_KEY,
        })
        .then(
          (response) => {
            console.log("SUCCESS!", response.status, response.text);
          },
          (error) => {
            console.log("FAILED...", error);
          }
        );

      // Gestion du message de statut
      if (response.ok) {
        setStatusMessage("Message envoyé avec succès !");
        setFormData({ name: "", email: "", subject: "", message: "" }); // Réinitialisation du formulaire
      } else {
        setStatusMessage("Erreur lors de l'envoi !");
      }
    } catch (error) {
      setStatusMessage("Une erreur est survenue !");
    }
  };

  return (
    &lt;div className="contactme">
      &lt;h2>Contactez-moi&lt;/h2>

      {/* Formulaire d'envoi */}
      &lt;form onSubmit={handleSubmit} ref={form}>
        &lt;input
          type="text"
          name="name"
          placeholder="Nom"
          onChange={handleChange}
          value={formData.name}
          required
        />
        &lt;input
          type="email"
          name="email"
          placeholder="Email"
          onChange={handleChange}
          value={formData.email}
          required
        />
        &lt;input
          type="text"
          name="subject"
          placeholder="Objet"
          onChange={handleChange}
          value={formData.subject}
          required
        />
        &lt;textarea
          name="message"
          placeholder="Message"
          onChange={handleChange}
          value={formData.message}
          required
        >&lt;/textarea>
        &lt;button type="submit">Envoyer&lt;/button>
      &lt;/form>

      {/* Affichage du message de statut */}
      {statusMessage &amp;&amp; &lt;p>{statusMessage}&lt;/p>}
    &lt;/div>
  );
}

export default ContactForm;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#ContactForm">ContactForm</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun May 04 2025 16:56:54 GMT+0400 (heure normale de Maurice)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
